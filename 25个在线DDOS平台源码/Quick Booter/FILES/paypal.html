<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">
<!-- saved from url=(0014)about:internet -->
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="generator" content="Adobe RoboHelp - http://www.adobe.com">
<title>PayPal - Auto download originals</title>
<link rel="stylesheet" href="default_ns.css"><script type="text/javascript" language="JavaScript" title="WebHelpSplitCss">
<!--
if (navigator.appName !="Netscape")
{ document.write("<link rel='stylesheet' href='default.css'>");}
//-->
</script>
<style type="text/css">
<!--
p.whs1 { color:#ff7f00; }
p.whs2 { color:#ffc1a5; }
p.whs3 { color:#ffffff; }
p.whs4 { margin-left:40px; }
p.whs5 { margin-left:80px; }
p.whs6 { margin-left:0px; }
img_whs7 { border:none; width:800px; height:469px; float:none; border-style:none; }
img_whs8 { border:none; width:800px; height:420px; float:none; border-style:none; }
img_whs9 { border:none; width:754px; height:480px; float:none; border-style:none; }
p.whs10 { color:#ffc1a5; margin-left:40px; }
p.whs11 { color:#ffff00; margin-left:40px; }
p.whs12 { color:#0000ff; margin-left:40px; }
p.whs13 { font-weight:bold; color:#ff7f00; }
hr.whs14 { float:aligncenter; height:1px; color:#e8e8e8; margin-bottom:0px; }
table.whs15 { x-cell-content-align:top; width:100%; border-spacing:0px; }
col.whs16 { width:50%; }
tr.whs17 { x-cell-content-align:top; }
td.whs18 { width:50%; padding-right:10px; padding-left:10px; border-top-style:none; border-right-style:none; border-bottom-style:none; border-left-style:none; }
p.whs19 { color:#f5ae0a; }
td.whs20 { width:50%; padding-right:10px; padding-left:10px; border-top-style:none; border-right-style:none; border-bottom-style:none; }
p.whs21 { color:#f5ae0a; text-align:right; }
-->
</style><script type="text/javascript" language="JavaScript">
<!--
if ((navigator.appName == "Netscape") && (parseInt(navigator.appVersion) == 4))
{
var strNSS = "<style type='text/css'>";
strNSS += "p.whs6 {margin-left:1pt; }";
strNSS += "hr.whs14 {margin-bottom:1pt; }";
strNSS +="</style>";
document.write(strNSS);
}
//-->
</script>
<script type="text/javascript" language="JavaScript" title="WebHelpInlineScript">
<!--
function reDo() {
if (innerWidth != origWidth || innerHeight != origHeight)
location.reload();
}
if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
origWidth = innerWidth;
origHeight = innerHeight;
onresize = reDo;
}
onerror = null; 
//-->
</script>
<style type="text/css">
<!--
div.WebHelpPopupMenu { position:absolute; left:0px; top:0px; z-index:4; visibility:hidden; }
-->
</style><script type="text/javascript" language="javascript1.2" src="whmsg.js"></script>
<script type="text/javascript" language="javascript" src="whver.js"></script>
<script type="text/javascript" language="javascript1.2" src="whproxy.js"></script>
<script type="text/javascript" language="javascript1.2" src="whutils.js"></script>
<script type="text/javascript" language="javascript1.2" src="whlang.js"></script>
<script type="text/javascript" language="javascript1.2" src="whtopic.js"></script>
</head>
<body><script type="text/javascript" language="javascript1.2">
<!--
if (window.gbWhTopic)
{
if (window.addTocInfo)
{
addTocInfo("Step-By-Step \nPayPal - Auto download originals");
addButton("show",BTN_TEXT,"Show","","","","",0,0,"","","");

}
if (window.writeBtnStyle)
writeBtnStyle();

if (window.writeIntopicBar)
writeIntopicBar(1);

if(1)
{
document.write("<p style=\"text-align:right\"> ");
AddMasterBreadcrumbs("index.htm", "", ">", "Home", "Introduction.htm");
document.write("<a href=\"Intro.htm\">Step-By-Step </a> > PayPal - Auto download originals</p>");

}

if (window.setRelStartPage)
{
setRelStartPage("index.htm");

autoSync(1);
sendSyncInfo();
sendAveInfoOut();
}
}
else
if (window.gbIE4)
document.location.reload();

//-->
</script>
<h1>PayPal - Auto download originals</h1>
<p>Allows your buyers to automatically download the original images after 
successful PayPal checkout. Gives you a complete freedom for one of the 
major after sales work flow &nbsp;task!</p>
<p>&nbsp;</p>
<p>Features:</p>
<p>1. after successful PayPal payment, the client will be redirected to 
a page where they can download the original images.</p>
<p>2. provides an option to download all the purchased images in a single 
zip.</p>
<p>3. displays a link to &nbsp;the order file so that 
the buyer can verify if the download image listing matches their purchased 
items.</p>
<p>4. Limits the maximum number of times each file can be downloaded.</p>
<p>&nbsp;</p>
<p>Notes: </p>
<p>1. The download page is valid only for some minutes after which the 
page gets automatically expired. This is due to the fact that the download 
page validates the purchase by making a connection to PayPal, which is 
valid only for certain minutes.</p>
<p>&nbsp;</p>
<p>2. The buyer has sufficient time to download the images. If for some 
reason if they didn't downloaded, &nbsp;they need to 
contact the seller an the seller needs to send the originals manually. 
The same PayPal return page link can not be used/activated (See step 8)</p>
<p>&nbsp;</p>
<p>Steps to enable/use:</p>
<p>&nbsp;</p>
<p class="whs1">1. Setting up the folder to store original images.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;a. &nbsp;Find a secured 
folder on your website which is not accessible via web but accessible 
to server side script (PHP).</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If your server 
is Windows, when you FTP login, you'll find a folder called 'Database' 
or 'private_html' (same folder where you've &nbsp;&nbsp;</p>
<p><span style="margin-left: 40px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public_html 
folder). &nbsp;&nbsp;</span></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If &nbsp;you 
don't have or not sure, contact your hosting provider to find the full 
path to that folder.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;b. Upload your original images to that 
folder. No folder structure allowed. So, before copying your originals, 
make sure if your </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;images on the album 
have unique file names.(when you're selling photos, it's better to have 
unique names to identify each </p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image anyway)</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p class="whs1">2. Setting up your paypal account.</p>
<p>&nbsp;</p>
<p>&nbsp;Logon to PayPal account, click 'profile' tab 
and click on the 'website payment preferences' link. Enable PDT and Auto 
return &nbsp;&nbsp;options and set the 'return url' to 
paypalreturn.php path in your web album 'res' folder. When you save the 
settings, PayPal will display authorization token value. Make note of 
it. It'll be required in FotoPlayer settings file.</p>
<p>&nbsp;</p>
<p class="whs2">&nbsp;</p>
<p class="whs1">3. Shoppingcart.xml edits:</p>
<p class="whs3">&nbsp;Edit res/shoppingcart/shoppingcart.xml 
file in FP skin folder. Set the paypal settings.</p>
<p class="whs4">&lt;paypal&gt;</p>
<p class="whs5">&lt;upload value=&quot;1&quot; &nbsp;/&gt;</p>
<p class="whs5">&lt;business value=&quot;EnterPaypalAccountEmail&quot; 
&nbsp;/&gt;</p>
<p class="whs5">&lt;returnURL value=&quot;<span style="color: #ff0000;"><font color=red >http://www.yourdomain.com/album/res/paypalreturn.php</font></span>&quot; 
&nbsp;/&gt;</p>
<p class="whs5">&lt;currency_code value=&quot;USD&quot; &nbsp;/&gt;</p>
<p class="whs5">&lt;url value=&quot;https://www.paypal.com/cgi-bin/webscr&quot; 
target=&quot;_blank&quot; &nbsp;/&gt;</p>
<p class="whs5">&lt;returnbuttontext enabled=&quot;N&quot; 
value=&quot;Return to Merchant&quot; &nbsp;/&gt;</p>
<p class="whs5">&lt;customdatatopaypal value=&quot;<span 
style="color: #ff0000;"><font color=red >albumpath</font></span>&quot;/&gt;</p>
<p class="whs4">&lt;/paypal&gt; </p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p class="whs1">4. ReturnURL path:</p>
<p>Set the returnURL path to the &nbsp;paypalreturn.php 
in your web album 'res' folder. This is the file PayPal is going to redirect 
the buyer on successful payment.</p>
<p class="whs1">&nbsp;</p>
<p class="whs1">5. Edit paypalreturn.php in FP skin 'PHP' folder.</p>
<p>&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;1. Set the authorization token variable 
value to the token ID you noted in Step 1.</p>
<p class="whs4">Example: <span style="margin-left: 40px;">$auth_token 
= &quot;605Y5POCrWitPGRLeZn8vq6Vesdb9fFKj4w3xpdfTbZtsWO5QT-z1oNPgee&quot;;</span></p>
<p class="whs4">&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;2. Set paypal url.</p>
<p class="whs4">Default value is $paypalurl = &quot;www.paypal.com&quot;; 
If you're using PayPal test environment (SandBox) you need to change this 
URL to http://www.sandbox.paypal.com.</p>
<p class="whs4">&nbsp;</p>
<p class="whs6">&nbsp;&nbsp;&nbsp;3. Customize 
the messages if required.</p>
<p class="whs4">a. $invalid_auth_message</p>
<p class="whs4">b. $footer_message</p>
<p class="whs4">c. $zip_download_message</p>
<p class="whs4">&nbsp;</p>
<p>&nbsp;&nbsp;&nbsp;</p>
<p class="whs1">&nbsp;&nbsp;6. Edit download.php 
in FP skin 'PHP' folder.</p>
<p>&nbsp;</p>
<p class="whs4">1. Set the path where youv'e stored your 
original images in variable,</p>
<p class="whs5">$original_path = &quot;drive:/somefolder/account/yourdomain/database/originals/&quot;;</p>
<p class="whs5">&nbsp;</p>
<p class="whs5">If you're not sure about the relative path 
to the originals folder, download findpath.php <a href="http://www.fotoplayer.com/downloads/findpath.zip">from 
here</a> and upload to your website root folder (public_html) and view 
this file from browser (domain.com/findpath.php) . It'll display the relative 
path. Once you've the relative path to your public_html folder, you should 
be able to find the relative path to 'database' folder from it.</p>
<p class="whs5">&nbsp;</p>
<p class="whs4">2. Customize the error message if required.</p>
<p class="whs5">$invalid_pay_status.</p>
<p class="whs4">3. Customize the max download count.</p>
<p class="whs5">$max_download_count (default is set to 5).</p>
<p class="whs4">4. &nbsp;Customize error 
message when download limit exceeded.</p>
<p class="whs5">$download_exceeded_msg </p>
<p>&nbsp;</p>
<p class="whs1">&nbsp;</p>
<p class="whs1">&nbsp;&nbsp;7. Screenshots 
of payment/download from buyer view.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="paypal-downloadUI1.gif" x-maintain-ratio="TRUE" width="800px" height="469px" border="0" class="img_whs7"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="paypal-downloadUI2.gif" x-maintain-ratio="TRUE" width="800px" height="420px" border="0" class="img_whs8"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><img src="paypal-downloadUI3.gif" x-maintain-ratio="TRUE" width="754px" height="480px" border="0" class="img_whs9"></p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p class="whs1">8. Providing Manual download links:</p>
<p>&nbsp;</p>
<p class="whs4">FotoPlayer allows to provide a secured way 
of manually downloading the originals if ,</p>
<p class="whs4">&nbsp;&nbsp;a. the buyer 
did not downloaded the originals immediately after the payment or</p>
<p class="whs4">&nbsp;&nbsp;b. the PayPal 
payment was pending / failed and you've manually verified that you've 
received the payment.</p>
<p class="whs4">&nbsp;</p>
<p class="whs4">Step 1: </p>
<p class="whs4">FTP login to your site and navigate to 'res/shoppingcart' 
folder where the order files are stored.</p>
<p class="whs4">Step2 :</p>
<p class="whs4">Along with the order file, you should also 
find another text file in the same name as the order file but suffixed 
with a random number.</p>
<p class="whs4">&nbsp;</p>
<p class="whs4">Example: </p>
<p class="whs4">20070527_113727278.txt &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; 
Order file</p>
<p class="whs4">20070527_113727278_5437.txt &nbsp;-&gt; 
Payment Status file automatically created when the buyer is redirected 
to your download page. This file contains stats like, date and time , 
number of download attempts, paypal status etc. </p>
<p class="whs4">&nbsp;</p>
<p class="whs4">Sample content of payment status file:</p>
<p class="whs4">&nbsp;</p>
<p class="whs10">Payment, Download LOG : </p>
<p class="whs10">-----------------------------------------------------</p>
<p class="whs10">Date: Sun, 27 May 2007 05:33:44 
| status: SUCCESS | amount:52.00 | First Name: FP | Last Name :Clientfirst 
| Txn ID: 94F60719YF798321A | pay date: 03:39:39 May 27, 2007 PDT | payer 
email: fpclient1@fpuser.com | payer status: verified | address status: 
confirmed | payment status: <span style="font-weight: bold; color: #ffff00;"><font color=yellow ><B>Completed</B></font></span></p>
<p class="whs10">Download Status: Sun, 27 
May 2007 05:34:23 | File Name: IL64.jpg</p>
<p class="whs10">Download Status: Sun, 27 
May 2007 05:34:30 | File Name: IL35.jpg</p>
<p class="whs11">&nbsp;</p>
<p class="whs12">&nbsp;</p>
<p class="whs4">Step 3:</p>
<p class="whs4">If you find the payment status not as 'Completed' 
and you've verified that you've received the payment, set the text to 
'Completed' as shown above.</p>
<p class="whs4">&nbsp;</p>
<p class="whs4">Step4:</p>
<p class="whs4">Now you can provide a link to download all 
the images in a single zip.</p>
<p class="whs4">&nbsp;</p>
<p class="whs4">For above example <span style="margin-left: 40px;">the 
download link will be,</span></p>